{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Keep Watching\\\\Keep-Watching\\\\client\\\\src\\\\components\\\\components\\\\Review\\\\reviews.jsx\";\n\n/* eslint-disable no-unused-vars */\nimport React, { useState, useContext, useEffect } from \"react\";\nimport \"./reviews.styles.css\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport AuthContext from \"../../../context/Authentication/authenticationContext\";\nimport AlertContext from \"../../../context/AlertContext/AlertContext\";\n\nconst Reviews = props => {\n  const movieID = props.movieID;\n  const movie_data = props.movie;\n  const authContext = useContext(AuthContext);\n  const {\n    loading,\n    setLoadingtrue,\n    isAuthenticated,\n    user,\n    setLoadingFalse,\n    loadUser\n  } = authContext;\n  const alertContext = useContext(AlertContext);\n  const {\n    setAlert\n  } = alertContext;\n  const [stateReview, setStateReview] = useState(\"\");\n  const [isReviewed, setIsReviewed] = useState(false);\n  const [readMore, setReadMore] = useState(false);\n  useEffect(() => {\n    const fetchReview = async () => {\n      if (isAuthenticated) {\n        let reviewID = -1;\n\n        for (let i = 0; i < user.movies_reviewed.length; i++) {\n          if (user.movies_reviewed[i][0] === String(movieID)) {\n            setIsReviewed(true);\n            reviewID = user.movies_reviewed[i][1];\n            break;\n          }\n        }\n\n        let review = await axios.get(\"/api/reviews/review/\" + reviewID);\n        review = review.data.review;\n        setStateReview(review);\n      }\n    };\n\n    fetchReview();\n  }, [isAuthenticated, user, readMore]);\n\n  if (!isAuthenticated) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"review-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"SigninLink-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 50\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/signin\",\n      className: \"SigninLink\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 89\n      }\n    }, \" Log in to leave a review for this movie\")));\n  } else {\n    const toggleReadMore = () => setReadMore(!readMore);\n\n    if (isReviewed) {\n      //  if the user has already rated this movie  \n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"review-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"review\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"first\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 29\n        }\n      }, \"Your Review :\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"review-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 25\n        }\n      }, stateReview.length > 150 && !readMore ? /*#__PURE__*/React.createElement(React.Fragment, null, stateReview.slice(0, 150) + \"...   \", /*#__PURE__*/React.createElement(\"button\", {\n        onClick: toggleReadMore,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 37\n        }\n      }, \"Read More\")) : /*#__PURE__*/React.createElement(React.Fragment, null, stateReview + \"           \", stateReview.length > 150 && /*#__PURE__*/React.createElement(\"button\", {\n        onClick: toggleReadMore,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 71\n        }\n      }, \" Show Less\")))));\n    } else {\n      //  If the user is logged in and has not rated this movie\n      const handelChange = event => {\n        console.log(event.target.name, \" ----> \", event.target.value);\n        setStateReview(event.target.value);\n      };\n\n      const handelSubmit = async event => {\n        event.preventDefault();\n        console.log(\"setting loading to true\");\n        setLoadingtrue();\n        const data = {\n          user_id: event.target.user_id.value,\n          movie_id: event.target.movie_id.value,\n          review: event.target.review_text.value,\n          username: event.target.username.value,\n          movie_data\n        };\n        console.log(\"Data recieved = \", data);\n\n        if (stateReview.length < 1) {\n          console.log(\"submit cancelled because review.length < 1\");\n          setAlert(\"please fill in a review to submit\");\n          return;\n        }\n\n        try {\n          console.log(\"making the post request\");\n          const res = await axios.post(\"/api/reviews/addReview\", data);\n          console.log(\"the response of the post req = \", res.data);\n          console.log(\"calling load user in the reviews function\");\n          loadUser();\n        } catch (error) {\n          console.log(\"Error in the catch block inn the onSubmit function in the reviews.jsx\");\n          console.log(\"error = \", error.message);\n        }\n\n        setLoadingFalse();\n      };\n\n      if (loading) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"review-container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          class: \"review\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }\n        }, \"Loading\"));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"review-container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"leave-review-container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"form\", {\n          onSubmit: handelSubmit,\n          className: \"leave-review\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"hidden\",\n          value: user._id,\n          name: \"user_id\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"hidden\",\n          value: movieID,\n          name: \"movie_id\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"hidden\",\n          value: user.username,\n          name: \"username\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(\"textarea\", {\n          value: stateReview,\n          placeholder: \"Leave a review\",\n          name: \"review_text\",\n          onChange: handelChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 37\n          }\n        }, \"Leave  review\"), /*#__PURE__*/React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"selections-item\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 37\n          }\n        }, \"Post Review\"))));\n      }\n    }\n  }\n};\n\nexport default Reviews;","map":{"version":3,"sources":["C:/Users/DELL/Keep Watching/Keep-Watching/client/src/components/components/Review/reviews.jsx"],"names":["React","useState","useContext","useEffect","axios","Link","AuthContext","AlertContext","Reviews","props","movieID","movie_data","movie","authContext","loading","setLoadingtrue","isAuthenticated","user","setLoadingFalse","loadUser","alertContext","setAlert","stateReview","setStateReview","isReviewed","setIsReviewed","readMore","setReadMore","fetchReview","reviewID","i","movies_reviewed","length","String","review","get","data","toggleReadMore","slice","handelChange","event","console","log","target","name","value","handelSubmit","preventDefault","user_id","movie_id","review_text","username","res","post","error","message","_id"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport React, {useState, useContext, useEffect} from \"react\"\r\nimport \"./reviews.styles.css\"\r\nimport axios from \"axios\"\r\nimport {Link } from \"react-router-dom\"\r\n\r\nimport AuthContext from \"../../../context/Authentication/authenticationContext\"\r\nimport AlertContext from \"../../../context/AlertContext/AlertContext\"\r\n\r\nconst Reviews =   (props) => {\r\n    \r\n    const movieID = props.movieID\r\n    const movie_data = props.movie\r\n    \r\n    const authContext = useContext(AuthContext) \r\n    const {loading, setLoadingtrue, isAuthenticated, user, setLoadingFalse, loadUser} = authContext\r\n    \r\n    const alertContext = useContext(AlertContext)\r\n    const {setAlert} = alertContext\r\n    \r\n    const [stateReview, setStateReview] = useState(\"\")\r\n    const [isReviewed, setIsReviewed] = useState(false)\r\n    const [readMore, setReadMore] = useState(false)\r\n\r\n\r\n    useEffect( () => {\r\n        const fetchReview = async () => {\r\n            if(isAuthenticated){let reviewID = -1\r\n                for(let i =0; i<user.movies_reviewed.length; i++){\r\n                    if (user.movies_reviewed[i][0] === String(movieID)){\r\n                        setIsReviewed(true)\r\n                        reviewID = user.movies_reviewed[i][1] \r\n\r\n                        break\r\n                    }\r\n                    \r\n                }\r\n                let review = await axios.get(\"/api/reviews/review/\"+reviewID)\r\n                review = review.data.review \r\n                setStateReview(review)}\r\n        }\r\n        fetchReview()\r\n    }, [isAuthenticated, user, readMore])\r\n\r\n    if (!isAuthenticated){\r\n        return(<div className=\"review-container\"><div  className=\"SigninLink-container\"><Link to = \"/signin\" className=\"SigninLink\"> Log in to leave a review for this movie</Link></div></div>)\r\n    }\r\n    else{\r\n        const toggleReadMore = () => setReadMore(!readMore)\r\n        \r\n        if(isReviewed){      \r\n            //  if the user has already rated this movie  \r\n            return(\r\n                <div className=\"review-container\">\r\n                    <div className=\"review\">\r\n                        <p className=\"title\">\r\n                            <span className=\"first\">\r\n                                Your Review : \r\n                            </span>\r\n                        </p>\r\n                        <div className=\"review-content\">\r\n                            {\r\n                            (stateReview.length > 150 && !readMore) ?\r\n                                <>\r\n                                    {(stateReview.slice(0, 150) + \"...   \")}\r\n                                    <button onClick={toggleReadMore}>\r\n                                        Read More\r\n                                    </button>\r\n                                </>\r\n                                    :\r\n                                <>\r\n                                    {stateReview + \"           \"}\r\n                                    {\r\n                                        (stateReview.length > 150 )&& <button onClick={toggleReadMore}> Show Less</button>\r\n                                    }\r\n                                </>                     \r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }else{\r\n            //  If the user is logged in and has not rated this movie\r\n            const handelChange = (event) => {\r\n                console.log(event.target.name ,  \" ----> \", event.target.value )\r\n                setStateReview(event.target.value)\r\n            }\r\n            const handelSubmit = async (event) => {\r\n                event.preventDefault()\r\n                console.log(\"setting loading to true\")\r\n                setLoadingtrue()\r\n\r\n                const data = {\r\n                    user_id : event.target.user_id.value,\r\n                    movie_id : event.target.movie_id.value,\r\n                    review : event.target.review_text.value,\r\n                    username : event.target.username.value,\r\n                    movie_data\r\n                }\r\n                console.log(\"Data recieved = \", data)\r\n                if(stateReview.length < 1){\r\n                    console.log(\"submit cancelled because review.length < 1\")\r\n                    setAlert(\"please fill in a review to submit\")\r\n                    return\r\n                }\r\n    \r\n                try {\r\n                    console.log(\"making the post request\")\r\n                    const res = await axios.post(\"/api/reviews/addReview\", data)\r\n                    console.log(\"the response of the post req = \", res.data)\r\n                    console.log(\"calling load user in the reviews function\" )\r\n                    loadUser()\r\n                } catch (error) {\r\n                    console.log(\"Error in the catch block inn the onSubmit function in the reviews.jsx\")\r\n                    console.log(\"error = \",  error.message)\r\n                }\r\n                setLoadingFalse()\r\n            }\r\n\r\n            if(loading){\r\n                return(\r\n                    <div className=\"review-container\">\r\n                        <div class=\"review\">\r\n                            Loading\r\n                        </div>\r\n                    </div>\r\n                    ) \r\n            }else {\r\n                return(\r\n                    <div className=\"review-container\">\r\n                        <div className=\"leave-review-container\">\r\n                            <form onSubmit={handelSubmit} className=\"leave-review\">\r\n                                    <input type=\"hidden\" value={user._id} name=\"user_id\"/>\r\n                                    <input type=\"hidden\"  value={movieID} name=\"movie_id\" />\r\n                                    <input type=\"hidden\"  value={user.username} name=\"username\"/>\r\n                                    {/* <input type=\"text\" value = {stateReview} name=\"review_text\" onChange={handelChange}/> */}\r\n                                    <textarea value = {stateReview} placeholder=\"Leave a review\" name=\"review_text\" onChange={handelChange}>Leave  review</textarea>\r\n                                    <button type=\"submit\" className=\"selections-item\">Post Review</button>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Reviews"]},"metadata":{},"sourceType":"module"}