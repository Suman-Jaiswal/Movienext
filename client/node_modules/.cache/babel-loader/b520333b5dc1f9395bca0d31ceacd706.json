{"ast":null,"code":"// eslint-disable-next-line\nimport { useContext } from \"react\";\nimport axios from \"axios\";\nimport { REGISTER_SUCCESS, REGISTER_FAIL, USER_LOADED, AUTH_ERROR, LOGIN_SUCCESS, LOGOUT, CLEAR_ERRORS, SET_LOADING_FALSE, SET_LOADING_TRUE, UPDATE_USER } from '../types';\nexport default ((state, action) => {\n  switch (action.type) {\n    case SET_LOADING_FALSE:\n      return { ...state,\n        loading: false\n      };\n\n    case SET_LOADING_TRUE:\n      return { ...state,\n        loading: true\n      };\n\n    case USER_LOADED:\n      return { ...state,\n        isAuthenticated: true,\n        loading: false,\n        user: action.payload\n      };\n\n    case REGISTER_SUCCESS:\n    case LOGIN_SUCCESS:\n      localStorage.setItem('token', action.payload.token);\n      return { ...state,\n        ...action.payload,\n        isAuthenticated: true,\n        loading: false\n      };\n\n    case REGISTER_FAIL:\n    case AUTH_ERROR:\n      return { ...state,\n        token: null,\n        isAuthenticated: false,\n        loading: false,\n        user: null,\n        error: action.payload\n      };\n\n    case LOGOUT:\n      // eslint-disable-next-line\n      delete axios.defaults.headers.common[\"x-auth-token\"];\n      localStorage.removeItem('token');\n      return { ...state,\n        token: null,\n        isAuthenticated: false,\n        loading: false,\n        user: null,\n        error: action.payload\n      };\n\n    case CLEAR_ERRORS:\n      return { ...state,\n        error: null\n      };\n\n    case UPDATE_USER:\n      return { ...state,\n        user: action.payload\n      };\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["C:/Users/DELL/Keep Watching/Keep-Watching/client/src/context/Authentication/authenticationReducer.js"],"names":["useContext","axios","REGISTER_SUCCESS","REGISTER_FAIL","USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","LOGOUT","CLEAR_ERRORS","SET_LOADING_FALSE","SET_LOADING_TRUE","UPDATE_USER","state","action","type","loading","isAuthenticated","user","payload","localStorage","setItem","token","error","defaults","headers","common","removeItem"],"mappings":"AAAA;AACA,SAAQA,UAAR,QAAyB,OAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SACIC,gBADJ,EAEIC,aAFJ,EAGIC,WAHJ,EAIIC,UAJJ,EAKCC,aALD,EAMIC,MANJ,EAOIC,YAPJ,EAQCC,iBARD,EASCC,gBATD,EAUCC,WAVD,QAWS,UAXT;AAcE,gBAAe,CAACC,KAAD,EAAQC,MAAR,KAAmB;AAChC,UAAQA,MAAM,CAACC,IAAf;AAEF,SAAKL,iBAAL;AACC,aAAM,EACL,GAAGG,KADE;AAELG,QAAAA,OAAO,EAAE;AAFJ,OAAN;;AAID,SAAKL,gBAAL;AACC,aAAM,EACL,GAAGE,KADE;AAELG,QAAAA,OAAO,EAAE;AAFJ,OAAN;;AAID,SAAKX,WAAL;AACC,aAAO,EACN,GAAGQ,KADG;AAENI,QAAAA,eAAe,EAAE,IAFX;AAGND,QAAAA,OAAO,EAAE,KAHH;AAINE,QAAAA,IAAI,EAAEJ,MAAM,CAACK;AAJP,OAAP;;AAMD,SAAKhB,gBAAL;AACA,SAAKI,aAAL;AACCa,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BP,MAAM,CAACK,OAAP,CAAeG,KAA7C;AACA,aAAO,EACN,GAAGT,KADG;AAEN,WAAGC,MAAM,CAACK,OAFJ;AAGNF,QAAAA,eAAe,EAAE,IAHX;AAIND,QAAAA,OAAO,EAAE;AAJH,OAAP;;AAMI,SAAKZ,aAAL;AACL,SAAKE,UAAL;AACC,aAAO,EACN,GAAGO,KADG;AAENS,QAAAA,KAAK,EAAE,IAFD;AAGNL,QAAAA,eAAe,EAAE,KAHX;AAIND,QAAAA,OAAO,EAAE,KAJH;AAKNE,QAAAA,IAAI,EAAE,IALA;AAMNK,QAAAA,KAAK,EAAET,MAAM,CAACK;AANR,OAAP;;AAQD,SAAKX,MAAL;AACK;AACJ,aAAON,KAAK,CAACsB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA+B,cAA/B,CAAP;AACAN,MAAAA,YAAY,CAACO,UAAb,CAAwB,OAAxB;AACA,aAAO,EACN,GAAGd,KADG;AAENS,QAAAA,KAAK,EAAE,IAFD;AAGNL,QAAAA,eAAe,EAAE,KAHX;AAIND,QAAAA,OAAO,EAAE,KAJH;AAKNE,QAAAA,IAAI,EAAE,IALA;AAMNK,QAAAA,KAAK,EAAET,MAAM,CAACK;AANR,OAAP;;AAQG,SAAKV,YAAL;AACE,aAAO,EACL,GAAGI,KADE;AAELU,QAAAA,KAAK,EAAE;AAFF,OAAP;;AAIP,SAAKX,WAAL;AACC,aAAM,EACL,GAAGC,KADE;AAELK,QAAAA,IAAI,EAAEJ,MAAM,CAACK;AAFR,OAAN;;AAII;AACE,aAAON,KAAP;AA7DJ;AA+DD,CAhED","sourcesContent":["// eslint-disable-next-line\r\nimport {useContext} from \"react\" \r\nimport axios from \"axios\"\r\nimport {\r\n    REGISTER_SUCCESS,\r\n    REGISTER_FAIL,\r\n    USER_LOADED,\r\n    AUTH_ERROR,\r\n\tLOGIN_SUCCESS,\r\n    LOGOUT,\r\n    CLEAR_ERRORS,\r\n\tSET_LOADING_FALSE,\r\n\tSET_LOADING_TRUE,\r\n\tUPDATE_USER\r\n  } from '../types';\r\n\r\n\r\n  export default (state, action) => {\r\n    switch (action.type) {\r\n\r\n\t\tcase SET_LOADING_FALSE:\r\n\t\t\treturn{\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false\r\n\t\t\t}\r\n\t\tcase SET_LOADING_TRUE:\r\n\t\t\treturn{\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true\r\n\t\t\t}\r\n\t\tcase USER_LOADED:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisAuthenticated: true,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tuser: action.payload\r\n\t\t\t};\r\n\t\tcase REGISTER_SUCCESS:\r\n\t\tcase LOGIN_SUCCESS:\r\n\t\t\tlocalStorage.setItem('token', action.payload.token);\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload,\r\n\t\t\t\tisAuthenticated: true,\r\n\t\t\t\tloading: false\r\n\t\t\t};\r\n      \tcase REGISTER_FAIL:\r\n\t\tcase AUTH_ERROR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttoken: null,\r\n\t\t\t\tisAuthenticated: false,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tuser: null,\r\n\t\t\t\terror: action.payload\r\n\t\t\t};\r\n\t\tcase LOGOUT:\r\n\t\t     // eslint-disable-next-line\r\n\t\t\tdelete axios.defaults.headers.common [\"x-auth-token\"]\r\n\t\t\tlocalStorage.removeItem('token');\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttoken: null,\r\n\t\t\t\tisAuthenticated: false,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tuser: null,\r\n\t\t\t\terror: action.payload\r\n\t\t\t};\r\n      case CLEAR_ERRORS:\r\n        return {\r\n          ...state,\r\n          error: null\r\n\t\t};\r\n\tcase UPDATE_USER:\r\n\t\treturn{\r\n\t\t\t...state,\r\n\t\t\tuser: action.payload\r\n\t\t}\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n\r\n"]},"metadata":{},"sourceType":"module"}