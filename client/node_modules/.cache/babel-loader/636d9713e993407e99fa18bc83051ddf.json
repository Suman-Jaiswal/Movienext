{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Keep Watching\\\\Keep-Watching\\\\client\\\\src\\\\components\\\\pages\\\\Home.jsx\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { IMAGE_BASE_URL, BACKDROP_SIZE, POSTER_SIZE, SEARCH_BASE_URL, POPULAR_BASE_URL } from \"../../config\"; //  IMport components\n\nimport HeroImage from \"../components/HeroImage/HeroImage\";\nimport SearchBar from \"../components/SearchBar/SearchBar\";\nimport Grid from \"../components/Grid/Grid\";\nimport LoadMoreBtn from \"../components/LoadMoreButton/LoadMoreBtn\";\nimport Spinner from \"../components/Spinner/Spinner\";\nimport MovieThubm from \"../components/MovieThubmnail/MovieThumb\";\nimport Selections from \"../components/selections/selections\";\nimport Feed from \"../components/Feed/Feed\";\nimport Recommendation from \"../pages/recommendations/Recommendations\"; // import Footer from \"../components/Footer/Footer\"\n\nimport NoImage from \"../images/no_image.jpg\"; // importing custom hooks\n\nimport useHomeFetch from \"../hooks/useHomeFetch\"; //  importing context\n\nimport AuthContext from \"../../context/Authentication/authenticationContext\";\nimport Axios from \"axios\";\n\nconst Home = () => {\n  const authContext = useContext(AuthContext); // eslint-disable-next-line\n\n  const {\n    isAuthenticated,\n    loadUser\n  } = authContext;\n  const [selection, setSelection] = useState(\"Popular Movies\");\n  const [movieIndex, setMovieIndex] = useState(0);\n  useEffect(() => {\n    loadUser(); // this will spin up  the recommendation server\n\n    axios.get(\"https://keepwatching-server.herokuapp.com/\"); // eslint-disable-next-line\n  }, []);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [{\n    state,\n    loading,\n    error\n  }, fetchMovies] = useHomeFetch(searchTerm);\n  const [heroImageState, setHeroImageState] = useState({\n    image: \"\",\n    title: \"\",\n    text: \"\"\n  });\n\n  const loadMoreMovies = () => {\n    const searchEndpoint = `${SEARCH_BASE_URL}${searchTerm}&page=${state.currentPage + 1}`;\n    const popularEndpoint = `${POPULAR_BASE_URL}&page=${state.currentPage + 1}`;\n    const endpoint = searchTerm !== \"\" ? searchEndpoint : popularEndpoint; // console.log(\"ENDPOINT + =  \", endpoint)\n\n    fetchMovies(endpoint);\n  };\n\n  const handelClick = event => {\n    setSelection(event.target.value);\n  };\n\n  const searchMovies = search => {\n    const endpoint = search ? SEARCH_BASE_URL + search : POPULAR_BASE_URL;\n    setSearchTerm(search);\n    fetchMovies(endpoint);\n  };\n\n  if (error) return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 23\n    }\n  }, \" Something went wromg ....\");\n  if (!state.movies[0]) return /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 34\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 8\n    }\n  }, !searchTerm && /*#__PURE__*/React.createElement(HeroImage, {\n    image: `${IMAGE_BASE_URL}${BACKDROP_SIZE}${state.heroImage.backdrop_path}`,\n    title: state.heroImage.original_title,\n    text: state.heroImage.overview,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(SearchBar, {\n    callback: searchMovies,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(Selections, {\n    handelClick: handelClick,\n    collections: [\"Popular Movies\", \"Feed\", \"Recommendations\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 12\n    }\n  }), selection === \"Popular Movies\" && /*#__PURE__*/React.createElement(Grid, {\n    header: searchTerm ? \"Search Results:\" : \"Popular Movies\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 46\n    }\n  }, state.movies.map(movie => /*#__PURE__*/React.createElement(MovieThubm, {\n    key: movie.id,\n    clickable: true,\n    image: movie.poster_path ? `${IMAGE_BASE_URL}${POSTER_SIZE}${movie.poster_path}` : NoImage,\n    movieId: movie.id,\n    movieName: movie.original_title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  })), loading || /*#__PURE__*/React.createElement(LoadMoreBtn, {\n    text: \"Load More\",\n    callback: loadMoreMovies,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  })), selection === \"Feed\" && /*#__PURE__*/React.createElement(Feed, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 35\n    }\n  }), selection === \"Recommendations\" && /*#__PURE__*/React.createElement(Recommendation, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 46\n    }\n  }), loading && /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 24\n    }\n  }));\n};\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/DELL/Keep Watching/Keep-Watching/client/src/components/pages/Home.jsx"],"names":["React","useState","useContext","useEffect","axios","IMAGE_BASE_URL","BACKDROP_SIZE","POSTER_SIZE","SEARCH_BASE_URL","POPULAR_BASE_URL","HeroImage","SearchBar","Grid","LoadMoreBtn","Spinner","MovieThubm","Selections","Feed","Recommendation","NoImage","useHomeFetch","AuthContext","Axios","Home","authContext","isAuthenticated","loadUser","selection","setSelection","movieIndex","setMovieIndex","get","searchTerm","setSearchTerm","state","loading","error","fetchMovies","heroImageState","setHeroImageState","image","title","text","loadMoreMovies","searchEndpoint","currentPage","popularEndpoint","endpoint","handelClick","event","target","value","searchMovies","search","movies","heroImage","backdrop_path","original_title","overview","map","movie","id","poster_path"],"mappings":"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","sourcesContent":["import React, {useState, useContext, useEffect}  from \"react\"\r\nimport axios from \"axios\"\r\nimport {  \r\n    IMAGE_BASE_URL, BACKDROP_SIZE, \r\n    POSTER_SIZE, SEARCH_BASE_URL, \r\n    POPULAR_BASE_URL \r\n}\r\nfrom \"../../config\"\r\n\r\n//  IMport components\r\nimport HeroImage from \"../components/HeroImage/HeroImage\"\r\nimport SearchBar from \"../components/SearchBar/SearchBar\"\r\nimport  Grid from \"../components/Grid/Grid\"\r\nimport LoadMoreBtn from \"../components/LoadMoreButton/LoadMoreBtn\"\r\nimport Spinner from \"../components/Spinner/Spinner\"\r\nimport MovieThubm from \"../components/MovieThubmnail/MovieThumb\"\r\nimport Selections from \"../components/selections/selections\"\r\nimport Feed from \"../components/Feed/Feed\"\r\nimport Recommendation from \"../pages/recommendations/Recommendations\"\r\n\r\n// import Footer from \"../components/Footer/Footer\"\r\nimport NoImage  from \"../images/no_image.jpg\"\r\n\r\n// importing custom hooks\r\nimport useHomeFetch from \"../hooks/useHomeFetch\"\r\n\r\n//  importing context\r\nimport AuthContext from \"../../context/Authentication/authenticationContext\"\r\nimport Axios from \"axios\"\r\nconst Home =  () =>{\r\n\r\n    const authContext = useContext(AuthContext)\r\n     // eslint-disable-next-line\r\n    const {isAuthenticated, loadUser} = authContext\r\n\r\n    const [selection, setSelection] = useState(\"Popular Movies\")\r\n    const [movieIndex , setMovieIndex] = useState(0)\r\n    useEffect(()=>{\r\n        loadUser()\r\n        // this will spin up  the recommendation server\r\n        axios.get(\"https://keepwatching-server.herokuapp.com/\")\r\n     // eslint-disable-next-line\r\n    }, [])\r\n    \r\n    const [searchTerm, setSearchTerm] = useState(\"\")\r\n    const [{state, loading, error}, fetchMovies] =  useHomeFetch(searchTerm);\r\n\r\n    const [heroImageState, setHeroImageState] = useState({\r\n        image:\"\",\r\n        title:\"\",\r\n        text:\"\"\r\n        })\r\n   \r\n    const loadMoreMovies = () =>{\r\n        const searchEndpoint = `${SEARCH_BASE_URL}${searchTerm}&page=${state.currentPage + 1}`;\r\n        const popularEndpoint = `${POPULAR_BASE_URL}&page=${state.currentPage+1}`;\r\n    \r\n        const endpoint = searchTerm !== \"\" ? searchEndpoint : popularEndpoint;\r\n        // console.log(\"ENDPOINT + =  \", endpoint)\r\n        fetchMovies(endpoint)\r\n   }\r\n    const handelClick = (event) => {\r\n        setSelection(event.target.value)\r\n    }\r\n    const searchMovies = (search) => {\r\n        const endpoint = search ? SEARCH_BASE_URL + search  : POPULAR_BASE_URL;\r\n        setSearchTerm(search);\r\n        fetchMovies(endpoint);\r\n    }\r\n\r\n\r\n\r\n    if (error) return <div> Something went wromg ....</div>\r\n    if (!state.movies[0]) return <Spinner />\r\n    return (\r\n       <div>\r\n        \r\n           {!searchTerm &&\r\n               (<HeroImage \r\n               image={`${IMAGE_BASE_URL}${BACKDROP_SIZE}${state.heroImage.backdrop_path}`}\r\n               title={state.heroImage.original_title}\r\n               text={state.heroImage.overview}\r\n           />)}\r\n                 \r\n           <SearchBar callback={searchMovies}/>\r\n           <Selections handelClick={handelClick} collections={[\"Popular Movies\", \"Feed\", \"Recommendations\"]}/>\r\n           {selection ===\"Popular Movies\" && <Grid header={searchTerm ? \"Search Results:\" : \"Popular Movies\"}>\r\n                {state.movies.map(movie => (\r\n                    <MovieThubm \r\n                        key={movie.id}\r\n                        clickable\r\n                        image={movie.poster_path ?`${IMAGE_BASE_URL}${POSTER_SIZE}${movie.poster_path}`: NoImage}\r\n                        movieId={movie.id}\r\n                        movieName={movie.original_title}\r\n                    />\r\n                    ))\r\n                }\r\n                {loading || <LoadMoreBtn text=\"Load More\" callback={loadMoreMovies} />}\r\n           </Grid>}\r\n           {selection===\"Feed\" && <Feed />}\r\n           {selection===\"Recommendations\" && <Recommendation/>}\r\n           {loading && <Spinner /> }\r\n           \r\n           \r\n       </div>\r\n   )\r\n}\r\n\r\nexport default Home"]},"metadata":{},"sourceType":"module"}